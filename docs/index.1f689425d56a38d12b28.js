(()=>{"use strict";const e="53e8b7ab-f08c-4076-9cba-79ef50d59477";async function n(e){const n=document.querySelector(".movies");n.innerHTML="",e.items.forEach((e=>{const t=document.createElement("div");let i=e.genres.map((e=>e.genre)).join(", ");t.classList.add("movie"),t.innerHTML='\n      <div class="movie__inner '.concat(e.ratingKinopoisk>=8?"movie__inner--green":e.ratingKinopoisk>=5?"movie__inner--yellow":"movie__inner--red",'" data-rating="').concat(e.ratingKinopoisk,'">\n      <img\n            src=').concat(e.posterUrl,"\n            alt=").concat(e.nameRu,'\n            class="movie__image"\n          />\n          <div class="movie__info">\n            <h2 class="movie__title">').concat(e.nameRu,'</h2>\n            <p class="movie__category">').concat(i,"</p>\n          </div>\n      </div>      \n    "),n.append(t)}))}let t=!1;document.querySelector(".header__form").addEventListener("submit",(async function(i){if(i.preventDefault(),t)console.log("Запрос уже выполняется...");else{t=!0;try{let t=i.target.children[0];if(!t.value)return;let o=await async function(n){let t=await fetch("https://kinopoiskapiunofficial.tech/api/v2.2/films?ratingFrom=0&ratingTo=10&yearFrom=1000&yearTo=3000&keyword="+n,{headers:{"Content-Type":"application/json","X-API-KEY":e}});return await t.json()}(t.value);t.value="",n(o)}catch(e){console.error("Ошибка:",e)}finally{t=!1}}})),async function(){try{const n=await fetch("https://kinopoiskapiunofficial.tech/api/v2.2/films/collections?type=TOP_250_MOVIES&page=1",{headers:{"Content-Type":"application/json","X-API-KEY":e}});return await n.json()}catch(e){console.log("Ошибка получения фильмов: ",e)}}().then((e=>n(e)),(e=>console.log(e)))})();